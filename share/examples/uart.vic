PIC P16F690;

pragma variable export;

Main {
    setup UART, 9600; # set up USART for transmit
    write UART, "Hello World!\n";
    write UART, "100";
    write UART, 100;
    write UART, 0x12345678;
    #$myvar = "Hello World!";
    $myvar = 100;
    write UART, $myvar;
    read UART, Action {
        $myvar = shift;
    };
    write UART, $myvar;
}

Simulator {
    attach UART, 9600, 'loopback';
    stop_after 500ms;
    log UART;
    scope UART;
    autorun;
}
